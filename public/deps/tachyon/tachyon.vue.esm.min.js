import e from"vue";var t={},n={};function i(e){return{immediate:!0,handler:function(t){void 0!==t&&(this.columnInstance[e]=t)}}}["dataField","headerText","width","minWidth","visible","styles","id","editable","editOnEvents","resizable","labelFunction","sortable","sortCompare","sortDescending","isSortOriginal","calculateHeaderLayout","isRowMerge","isColumnMerge","mergeDependColumns","open","format","filter"].forEach((function(e){return t[r=e]=void 0,void(n[r]=i(r));var r}));var r={name:"column-core",props:t,computed:{columnInstance:function(){throw new Error("Not implemented !!!")}},watch:n,mounted:function(){this.columnInstance.children=this.$children.map((function(e){return e.columnInstance}))},render:function(e){return e("template",this.$slots.default)}};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){if(e instanceof Function)return e.apply(n,t)}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.wrapper=n}var t,n,i;return t=e,i=[{key:"factory",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new e(t,n);return{get htmlElement(){return this.compoenent.$el},created:function(e){this.compoenent=r.create(a({grid:e},i))},prepare:function(e,t){this.compoenent.state&&(this.compoenent.state=t),d(this.compoenent.$options.prepare,arguments,this.compoenent)},paint:function(e,t,n,i){d(this.compoenent.$options.paint,arguments,this.compoenent)},dispose:function(){},getSaveValue:function(){return d(this.compoenent.$options.getSaveValue,arguments,this.compoenent)}}}}],(n=[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new this.wrapper(a({parent:this.parent},e));return t.$scopedSlots=this.parent.$scopedSlots,t.$mount(),t}}])&&o(t.prototype,n),i&&o(t,i),e}(),h=["render","name"];function m(t){return t instanceof Function&&t.super===e}function f(t,n){var i=null;return m(n)?i=n:n&&"object"===s(n)&&h.every((function(e){return e in n}))&&(i=e.extend(n)),i?Object.freeze(u.factory(t,i)):n}function p(e,t){return(!m(t)&&t instanceof Function?function(){return f(e,t.apply(e,arguments))}:f(e,t))||t}var g=new(0,new e.observable({}).__ob__.constructor)({DUMMY:"DUMMY"});function v(e){return Object.defineProperty(e,"__ob__",{value:g,enumerable:!1,configurable:!0}),e}var b=e.extend({name:"tachyon-item-renderer",inject:{grid:{default:null}},data:function(){return{state:{}}},computed:{item:function(){return this.state.item},cellPosition:function(){return this.state.cellPosition},column:function(){return this.state.column},label:function(){var e=this.state.label;return null!=e?""+e:""},staticClass:function(){return""},attrs:function(){return{selected:this.state.selected,hovered:this.state.hovered}},scopedProps:function(){return{state:this.state,item:this.item,column:this.column,cell:this.state.cell,cellPosition:this.cellPosition,label:this.label}}},methods:{genLabel:function(){if(!this.item)return null;var e=[];return this.$scopedSlots.itemRenderer?e.push(this.$scopedSlots.itemRenderer(this.scopedProps)):e.push(this.label),e}},render:function(e){return e("div",{staticClass:this.staticClass,attrs:this.attrs},this.genLabel())}}),y=e.extend({name:"tachyon-header-renderer",inject:{grid:{default:null}},data:function(){return{state:{}}},computed:{cell:function(){return this.state.cellPosition},column:function(){return this.state.column},label:function(){var e=this.state.label;return null!=e?""+e:""},staticClass:function(){return""},attrs:function(){return{selected:this.state.selected,hovered:this.state.hovered}},scopedProps:function(){return{state:this.state,column:this.column,label:this.label}}},methods:{genLabel:function(){var e=[];return this.$scopedSlots.headerRenderer?e.push(this.$scopedSlots.headerRenderer(this.scopedProps)):e.push(this.label),e}},render:function(e){return e("div",{staticClass:this.staticClass,attrs:this.attrs},this.genLabel())}}),I=e.extend({name:"tachyon-item-editor",inject:{grid:{default:null}},data:function(){return{state:{}}},computed:{item:function(){return this.state.item},cellPosition:function(){return this.state.cellPosition},column:function(){return this.state.column},label:function(){var e=this.state.label;return null!=e?""+e:""},staticClass:function(){return""},attrs:function(){return{selected:this.state.selected,hovered:this.state.hovered}},scopedProps:function(){return{state:this.state,item:this.item,column:this.column,cell:this.state.cell,cellPosition:this.cellPosition,label:this.label}}},methods:{genLabel:function(){if(!this.item)return null;var e=[];return this.$scopedSlots.itemEditor?e.push(this.$scopedSlots.itemEditor(this.scopedProps)):e.push(this.label),e}},render:function(e){return e("div",{staticClass:this.staticClass,attrs:this.attrs},this.genLabel())}}),C={name:"tachyon-column",mixins:[r],props:{mode:{type:String,default:"dom"},headerRenderer:{type:[Function,Object],default:null},itemRenderer:{type:[Function,Object],default:null},itemEditor:{type:[Function,Object],default:null}},computed:{columnInstance:function(){return v(tachyon.createColumn())}},watch:{mode:{immediate:!0,handler:function(e){this.updateItemRenderer()}},headerRenderer:{immediate:!0,handler:function(e){this.updateHeaderRenderer()}},itemRenderer:{immediate:!0,handler:function(e){this.updateItemRenderer()}},itemEditor:{immediate:!0,handler:function(e){this.updateItemEditor()}}},methods:{updateHeaderRenderer:function(){var e=null;this.$vnode.data.scopedSlots&&this.$vnode.data.scopedSlots.headerRenderer?e=p(this,y):this.headerRenderer&&(e=p(this,this.headerRenderer)),this.columnInstance.headerRenderer=e},updateItemRenderer:function(){var e=null;"canvas"===this.mode?e=tachyon.component.Renderer.defaultCanvasItemRenderer:this.$vnode.data.scopedSlots&&this.$vnode.data.scopedSlots.itemRenderer?e=p(this,b):this.itemRenderer&&(e=p(this,this.itemRenderer)),this.columnInstance.itemRenderer=e},updateItemEditor:function(){var e=null;this.$vnode.data.scopedSlots&&this.$vnode.data.scopedSlots.itemEditor?e=p(this,I):this.itemEditor&&(e=p(this,this.itemEditor)),this.columnInstance.itemEditor=e}}},R=["selection-changing","selection-change","collection-change","node-change","column-collection-change","column-node-change","scroll","normalized-columns-change","item-over","item-out","item-down","item-up","item-drag","item-click","item-double-click","item-edit-starting","item-edit-start","item-edit-ending","item-edit-end","item-edit-cancel","header-double-click","header-down","header-up","header-click","header-drag","header-drop","header-out","header-over","selection-drag-start","selection-drag-end"],E={},O={},S={};["items","columns","labelFunction","rowHeight","headerRowHeight","autoRowHeight","rowCount","maxRowCount","useNullItemRenderer","autoMerge","frozenLeft","frozenRight","frozenTop","frozenBottom","mergeCompare","sortableColumns","resizableColumns","draggableColumns","editable","editOnKeys","editOnEvents","selectionMode","theme","styles","pasteFromClipboard","selectOnDrag"].forEach((function(e){!function(e){E[e]=void 0,O[e]=function(t,n){this.gridInstance&&(this.gridInstance[e]=t)}}(e)})),["itemToLabel","scrollToCell","focus","getSortColumns","sortByColumns","getAddon","addAddon","addColumn","addColumnAt","addColumns","addColumnsAt","removeColumn","removeColumnsAt","getMergeCells","addMergeCells","addMergeCell","removeMergeCell","removeMergeCells","invalidate","validateNow","lockDisplay","unlockDisplay","isCellEditable","startEdit","endEdit","cancelEdit","isEditing","analysisMergeAll"].forEach((function(e){S[e]=function(){if(this.gridInstance){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.gridInstance[e].apply(this.gridInstance,n)}}}));var w,$={name:"grid-core",provide:function(){return{grid:this}},props:a(a({},E),{},{headerRenderer:{type:[Function,Object]},itemRenderer:{type:[Function,Object]},mergeItemRenderer:{type:[Function,Object]},nullItemRenderer:{type:[Function,Object]},itemEditor:{type:[Function,Object]}}),data:function(){return{gridInstance:null,selectedItems:function(){return[]},selectedItem:null,selectedIndices:function(){return[]},selectedIndex:-1,selectedCells:function(){return[]},selectedCell:null,pendingValue:this.value,deferredFunc:null}},computed:{collection:function(){return this.items&&this.gridInstance&&this.gridInstance.collection||null},staticClass:function(){return"".concat(this.$options.name,"-wrapper")},normalizedColumns:function(){return this.items&&this.columns,this.gridInstance&&this.gridInstance.normalizedColumns||[]}},watch:a(a({},O),{},{gridInstance:function(e){var t=this;if(e){R.forEach((function(n){e.addEventListener(n,t.onGridInstanceEvents)}));var n=["headerRenderer","itemRenderer","mergeItemRenderer","nullItemRenderer","itemEditor"],i=this.$props;for(var r in i){var s=i[r];void 0!==s&&(n.indexOf(r)>=0?e[r]=p(this,s):e[r]=s)}this.deferredFunc&&(this.deferredFunc(),this.deferredFunc=null),e.hookFreeElement=function(e){return e.htmlElement&&e.htmlElement.__vue__&&e.htmlElement.__vue__.$destroy(),!1}}},headerRenderer:function(e){this.gridInstance.headerRenderer=p(this,e)},itemRenderer:function(e){this.gridInstance.itemRenderer=p(this,e)},mergeItemRenderer:function(e){this.gridInstance.mergeItemRenderer=p(this,e)},nullItemRenderer:function(e){this.gridInstance.nullItemRenderer=p(this,e)},itemEditor:function(e){this.gridInstance.itemEditor=p(this,e)},value:{handler:function(e){e&&!Array.isArray(e)&&(e=[e]),this.setSelections(e)}},selectedItems:function(e){this.setSelections(e)},selectedItem:function(e){this.setSelections(e)},selectedIndices:function(e){var t=this;this.setSelections((e||[]).map((function(e){return t.items[e]})))},selectedIndex:function(e){this.setSelections(this.items[e])},selectedCells:function(e){this.setSelections(e)},selectedCell:function(e){this.setSelections(e)}}),beforeDestroy:function(){var e=this;this.gridInstance&&(R.forEach((function(t){e.gridInstance.removeEventListener(t,e.onGridInstanceEvents)})),this.gridInstance.destroy())},methods:a(a({},S),{},{genColumns:function(){var e=(this.$slots.default||[]).find((function(e){return"columns"===e.tag})),t=e?e.children:[];return this.$createElement("template",{ref:"columns"},t)},setSelections:function(e){var t=this;this.lockSelect||(this.gridInstance?(null!=e&&(e=Array.isArray(e)?e:[e]),this.gridInstance.isCellMode?this.gridInstance.selectedCells=e:this.gridInstance.selectedItems=e,this.pendingValue=null):this.deferredFunc=function(){t.setSelections(e)})},syncSelection:function(){var e,t=this,n=this.gridInstance,i=n.selector;this.lockSelect=!0,this.selectedItems=n.selectedItems,this.selectedItem=n.selectedItem,this.selectedIndices=n.selectedIndices,this.selectedIndex=n.selectedIndex,this.selectedCells=n.selectedCells,this.selectedCell=n.selectedCell,e=i.isRowMode?i.isMultipleMode?n.selectedItems:n.selectedItem:i.isMultipleMode?n.selectedCells:n.selectedCell,this.$emit("input",e),this.$nextTick((function(){t.lockSelect=!1}))},onGridInstanceEvents:function(e){var t=e.type,n=e.detail;"selection-change"===t?this.syncSelection():"collection-change"===t&&"reset"===n.kind&&this.pendingValue&&this.setSelections(this.pendingValue),this.$emit(t,e)}}),render:function(e){var t=[this.genColumns()];return e("div",{staticClass:this.staticClass},t)}},P={name:"tachyon-grid",mixins:[$],mounted:function(){var e=this.gridInstance;e||(e=this.gridInstance=v(tachyon.createGrid(this.$el,{})));var t=this.$refs.columns;t&&t.parentElement&&t.parentElement.removeChild(t),this.gridInstance.columns=this.$children.map((function(e){return e.columnInstance}))},methods:{}},j=e.extend({name:"tachyon-tree-item-renderer",inject:{grid:{default:null}},props:{indent:{type:Number,default:30}},data:function(){return{state:function(){return{}},hasChildren:!1,level:-1,isOpened:!1}},computed:{item:function(){return this.state.item},column:function(){return this.state.column},label:function(){return this.state.label},staticClass:function(){return"tachyon-tree__item"},attrs:function(){return{selected:this.state.selected,hovered:this.state.hovered}},scopedProps:function(){return{item:this.state.item,cell:this.state.cell,cellPosition:this.state.cellPosition,column:this.state.column,label:this.label,level:this.level,isOpened:this.isOpened,hasChildren:this.hasChildren,state:this.state}},calculatedLeft:function(){return this.column&&this.column.boxMode?0:(this.level||0)*this.indent+"px"}},methods:{genLabel:function(){if(!this.item)return null;var e=[];return this.$scopedSlots.itemRenderer?e.push(this.$scopedSlots.itemRenderer(this.scopedProps)):e.push(this.label),e},genContent:function(){return[this.genToggle(),this.genLabel()]},genToggle:function(){var e=this,t=[];return this.$scopedSlots.toggle?t.push(this.$scopedSlots.toggle(this.scopedProps)):t.push(this.isOpened?"-":"+"),this.$createElement("div",{staticClass:this.staticClass+"__toggle",class:{"toggle--open":this.isOpened},style:{visibility:this.hasChildren?"":"hidden"},on:{mousedown:function(t){t.stopPropagation(),e.grid.toggleNode(e.item)}}},t)}},render:function(e){return e("div",{staticClass:this.staticClass,class:l({},this.staticClass+"--leaf",!this.hasChildren),style:{paddingLeft:this.calculatedLeft},attrs:this.attrs},this.genContent())},prepare:function(e,t){var n=t.item;this.hasChildren=e.hasChildren(n),this.level=e.getNodeLevel(n),this.isOpened=e.isOpenNode(n)}}),x={name:"tachyon-tree-column",mixins:[r],props:{indent:{type:Number,default:20},boxMode:{type:Boolean,default:!1},headerRenderer:{type:[Function,Object],default:null},itemRenderer:{type:[Function,Object],default:j}},computed:{columnInstance:function(){return v(tachyon.createTreeColumn())}},watch:{indent:i("indent"),boxMode:i("boxMode"),headerRenderer:{immediate:!0,handler:function(e){e&&(this.columnInstance.headerRenderer=p(this,e))}},itemRenderer:{immediate:!0,handler:function(e){e&&(this.columnInstance.itemRenderer=p(this,this.itemRenderer))}}}},M={name:"tachyon-tree-grid",mixins:[$],props:{autoExpandLevel:{type:Number,default:0}},mounted:function(){var e=this.gridInstance;e||(e=this.gridInstance=v(tachyon.createTreeGrid(this.$el,{})));var t=this.$refs.columns;t&&t.parentElement&&t.parentElement.removeChild(t),this.gridInstance.columns=this.$children.map((function(e){return e.columnInstance}))},destroyed:function(){},methods:{toggleNode:function(e){return this.gridInstance.toggleNode(e)}}},_=Object.freeze({__proto__:null,TachyonColumn:C,TachyonGrid:P,TachyonTreeColumn:x,TachyonTreeGrid:M}),F=(w=!1,function(e,t){if(!w&&t){for(var n in t)e.component(n,t[n]);w=!0}}),L={version:"1.0.0",install:function(e,t){F(e,_)}},k=window&&window.Vue;k&&k.use(L);export default L;export{u as ComponentWrapper,C as TachyonColumn,P as TachyonGrid,x as TachyonTreeColumn,M as TachyonTreeGrid};
